<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="700" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#333">
    Database Entity Relationship Diagram (ERD)
  </text>

  <!-- Legend -->
  <g id="legend">
    <text x="50" y="70" font-size="12" font-weight="bold" fill="#333">Legend:</text>
    <circle cx="50" cy="85" r="4" fill="#4CAF50"/>
    <text x="60" y="88" font-size="11" fill="#333">Primary Key (PK)</text>
    
    <circle cx="200" cy="85" r="4" fill="#2196F3"/>
    <text x="210" y="88" font-size="11" fill="#333">Foreign Key (FK)</text>
    
    <circle cx="350" cy="85" r="4" fill="#FF9800"/>
    <text x="360" y="88" font-size="11" fill="#333">Index</text>
    
    <line x1="500" y1="82" x2="520" y2="82" stroke="#000" stroke-width="2"/>
    <text x="525" y="88" font-size="11" fill="#333">Relationship (1:N)</text>
  </g>

  <!-- TENANTS Table -->
  <g id="tenants-table">
    <rect x="50" y="150" width="280" height="280" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2" rx="5"/>
    <rect x="50" y="150" width="280" height="35" fill="#4CAF50"/>
    <text x="190" y="173" font-size="14" font-weight="bold" text-anchor="middle" fill="white">TENANTS</text>
    
    <line x1="50" y1="185" x2="330" y2="185" stroke="#999" stroke-width="1"/>
    
    <!-- Columns -->
    <text x="65" y="210" font-size="11" font-weight="bold" fill="#333">id (PK)</text>
    <circle cx="310" cy="205" r="3" fill="#4CAF50"/>
    
    <text x="65" y="230" font-size="11" fill="#333">name</text>
    <text x="65" y="250" font-size="11" fill="#333">subdomain (UNIQUE)</text>
    <text x="65" y="270" font-size="11" fill="#333">status (active, suspended, trial)</text>
    <text x="65" y="290" font-size="11" fill="#333">subscription_plan (free, pro, enterprise)</text>
    <text x="65" y="310" font-size="11" fill="#333">max_users (5, 25, 100)</text>
    <text x="65" y="330" font-size="11" fill="#333">max_projects (3, 15, 50)</text>
    <text x="65" y="350" font-size="11" fill="#333">created_at, updated_at</text>
    <text x="65" y="370" font-size="11" fill="#666">Indexes: tenant_id</text>
  </g>

  <!-- USERS Table -->
  <g id="users-table">
    <rect x="400" y="150" width="280" height="340" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" rx="5"/>
    <rect x="400" y="150" width="280" height="35" fill="#2196F3"/>
    <text x="540" y="173" font-size="14" font-weight="bold" text-anchor="middle" fill="white">USERS</text>
    
    <line x1="400" y1="185" x2="680" y2="185" stroke="#999" stroke-width="1"/>
    
    <!-- Columns -->
    <text x="415" y="210" font-size="11" font-weight="bold" fill="#333">id (PK)</text>
    <circle cx="660" cy="205" r="3" fill="#4CAF50"/>
    
    <text x="415" y="230" font-size="11" fill="#333">tenant_id (FK) → tenants</text>
    <circle cx="660" cy="225" r="3" fill="#2196F3"/>
    <text x="670" y="230" font-size="10" fill="#666">nullable for super_admin</text>
    
    <text x="415" y="250" font-size="11" fill="#333">email</text>
    <circle cx="660" cy="245" r="3" fill="#FF9800"/>
    
    <text x="415" y="270" font-size="11" fill="#333">password_hash</text>
    <text x="415" y="290" font-size="11" fill="#333">full_name</text>
    
    <text x="415" y="310" font-size="11" fill="#333">role (super_admin,</text>
    <text x="430" y="325" font-size="11" fill="#333">tenant_admin, user)</text>
    
    <text x="415" y="345" font-size="11" fill="#333">is_active</text>
    <text x="415" y="365" font-size="11" fill="#333">created_at, updated_at</text>
    <text x="415" y="385" font-size="11" fill="#666">UNIQUE: (tenant_id, email)</text>
    <text x="415" y="405" font-size="11" fill="#666">Index: tenant_id</text>
    <text x="415" y="420" font-size="11" fill="#666">FK: ON DELETE CASCADE</text>
  </g>

  <!-- PROJECTS Table -->
  <g id="projects-table">
    <rect x="750" y="150" width="280" height="280" fill="#FFF3E0" stroke="#FF9800" stroke-width="2" rx="5"/>
    <rect x="750" y="150" width="280" height="35" fill="#FF9800"/>
    <text x="890" y="173" font-size="14" font-weight="bold" text-anchor="middle" fill="white">PROJECTS</text>
    
    <line x1="750" y1="185" x2="1030" y2="185" stroke="#999" stroke-width="1"/>
    
    <!-- Columns -->
    <text x="765" y="210" font-size="11" font-weight="bold" fill="#333">id (PK)</text>
    <circle cx="1010" cy="205" r="3" fill="#4CAF50"/>
    
    <text x="765" y="230" font-size="11" fill="#333">tenant_id (FK) → tenants</text>
    <circle cx="1010" cy="225" r="3" fill="#2196F3"/>
    <circle cx="1020" cy="225" r="3" fill="#FF9800"/>
    
    <text x="765" y="250" font-size="11" fill="#333">name</text>
    <text x="765" y="270" font-size="11" fill="#333">description</text>
    
    <text x="765" y="290" font-size="11" fill="#333">status (active, archived,</text>
    <text x="780" y="305" font-size="11" fill="#333">completed)</text>
    
    <text x="765" y="325" font-size="11" fill="#333">created_by (FK) → users</text>
    <circle cx="1010" cy="320" r="3" fill="#2196F3"/>
    
    <text x="765" y="345" font-size="11" fill="#333">created_at, updated_at</text>
    <text x="765" y="365" font-size="11" fill="#666">Index: tenant_id</text>
    <text x="765" y="380" font-size="11" fill="#666">FK: ON DELETE CASCADE</text>
  </g>

  <!-- TASKS Table -->
  <g id="tasks-table">
    <rect x="1100" y="150" width="280" height="340" fill="#FCE4EC" stroke="#E91E63" stroke-width="2" rx="5"/>
    <rect x="1100" y="150" width="280" height="35" fill="#E91E63"/>
    <text x="1240" y="173" font-size="14" font-weight="bold" text-anchor="middle" fill="white">TASKS</text>
    
    <line x1="1100" y1="185" x2="1380" y2="185" stroke="#999" stroke-width="1"/>
    
    <!-- Columns -->
    <text x="1115" y="210" font-size="11" font-weight="bold" fill="#333">id (PK)</text>
    <circle cx="1360" cy="205" r="3" fill="#4CAF50"/>
    
    <text x="1115" y="230" font-size="11" fill="#333">project_id (FK) → projects</text>
    <circle cx="1360" cy="225" r="3" fill="#2196F3"/>
    
    <text x="1115" y="250" font-size="11" fill="#333">tenant_id (FK) → tenants</text>
    <circle cx="1360" cy="245" r="3" fill="#2196F3"/>
    <circle cx="1370" cy="245" r="3" fill="#FF9800"/>
    
    <text x="1115" y="270" font-size="11" fill="#333">title</text>
    <text x="1115" y="290" font-size="11" fill="#333">description</text>
    
    <text x="1115" y="310" font-size="11" fill="#333">status (todo, in_progress,</text>
    <text x="1130" y="325" font-size="11" fill="#333">completed)</text>
    
    <text x="1115" y="345" font-size="11" fill="#333">priority (low, medium, high)</text>
    
    <text x="1115" y="365" font-size="11" fill="#333">assigned_to (FK) → users</text>
    <circle cx="1360" cy="360" r="3" fill="#2196F3"/>
    <text x="1250" y="380" font-size="10" fill="#666">(nullable)</text>
    
    <text x="1115" y="395" font-size="11" fill="#333">due_date (nullable)</text>
    <text x="1115" y="415" font-size="11" fill="#333">created_at, updated_at</text>
    <text x="1115" y="430" font-size="11" fill="#666">Composite Index: (tenant_id,</text>
    <text x="1130" y="445" font-size="11" fill="#666">project_id)</text>
    <text x="1115" y="460" font-size="11" fill="#666">FK: ON DELETE CASCADE</text>
  </g>

  <!-- AUDIT_LOGS Table -->
  <g id="audit-logs-table">
    <rect x="400" y="560" width="350" height="280" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2" rx="5"/>
    <rect x="400" y="560" width="350" height="35" fill="#9C27B0"/>
    <text x="575" y="583" font-size="14" font-weight="bold" text-anchor="middle" fill="white">AUDIT_LOGS</text>
    
    <line x1="400" y1="595" x2="750" y2="595" stroke="#999" stroke-width="1"/>
    
    <!-- Columns -->
    <text x="415" y="620" font-size="11" font-weight="bold" fill="#333">id (PK)</text>
    <circle cx="730" cy="615" r="3" fill="#4CAF50"/>
    
    <text x="415" y="640" font-size="11" fill="#333">tenant_id (FK) → tenants</text>
    <circle cx="730" cy="635" r="3" fill="#2196F3"/>
    <text x="500" y="655" font-size="10" fill="#666">(nullable for super_admin logs)</text>
    
    <text x="415" y="675" font-size="11" fill="#333">user_id (FK) → users</text>
    <circle cx="730" cy="670" r="3" fill="#2196F3"/>
    <text x="500" y="690" font-size="10" fill="#666">(nullable)</text>
    
    <text x="415" y="710" font-size="11" fill="#333">action (CREATE_USER,</text>
    <text x="430" y="725" font-size="11" fill="#333">DELETE_PROJECT, etc.)</text>
    
    <text x="415" y="745" font-size="11" fill="#333">entity_type (user, project, task)</text>
    <text x="415" y="765" font-size="11" fill="#333">entity_id (affected record)</text>
    <text x="415" y="785" font-size="11" fill="#333">ip_address (nullable)</text>
    <text x="415" y="805" font-size="11" fill="#333">created_at</text>
    <text x="415" y="820" font-size="11" fill="#666">FK: ON DELETE CASCADE</text>
  </g>

  <!-- Relationships/Connections -->
  <g id="relationships" stroke="#666" stroke-width="1.5" fill="none">
    <!-- Tenants to Users (1:N) -->
    <path d="M 190 430 L 400 220" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="250" y="310" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>
    <text x="280" y="325" font-size="9" fill="#666">1 tenant has many users</text>

    <!-- Tenants to Projects (1:N) -->
    <path d="M 280 250 L 750 250" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="490" y="240" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>
    <text x="500" y="255" font-size="9" fill="#666">1 tenant has many projects</text>

    <!-- Tenants to Tasks (1:N) -->
    <path d="M 280 320 L 1100 300" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="650" y="310" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>

    <!-- Tenants to Audit Logs (1:N) -->
    <path d="M 190 430 L 490 560" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="300" y="490" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>

    <!-- Users to Projects (1:N as creator) -->
    <path d="M 680 250 L 750 220" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="700" y="230" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>
    <text x="710" y="245" font-size="9" fill="#666">creates</text>

    <!-- Users to Tasks (1:N as assignee) -->
    <path d="M 680 350 L 1100 320" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="850" y="330" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>
    <text x="880" y="345" font-size="9" fill="#666">assigned to</text>

    <!-- Users to Audit Logs (1:N) -->
    <path d="M 540 490 L 550 560" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="510" y="520" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>

    <!-- Projects to Tasks (1:N) -->
    <path d="M 1030 250 L 1100 250" stroke="#2196F3" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="1050" y="240" font-size="10" fill="#2196F3" font-weight="bold">1:N</text>
    <text x="1060" y="255" font-size="9" fill="#666">contains</text>
  </g>

  <!-- Key Constraints Box -->
  <rect x="50" y="560" width="310" height="280" fill="#FFFACD" stroke="#FF6F00" stroke-width="2" rx="5"/>
  <text x="205" y="585" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">Key Constraints &amp; Design</text>
  
  <line x1="50" y1="595" x2="360" y2="595" stroke="#FF6F00" stroke-width="1"/>
  
  <text x="65" y="615" font-size="11" fill="#333">✓ Composite Unique:</text>
  <text x="80" y="630" font-size="10" fill="#333">(tenant_id, email) on users</text>
  
  <text x="65" y="650" font-size="11" fill="#333">✓ Foreign Key Constraints:</text>
  <text x="80" y="665" font-size="10" fill="#333">All with ON DELETE CASCADE</text>
  
  <text x="65" y="685" font-size="11" fill="#333">✓ Indexes on:</text>
  <text x="80" y="700" font-size="10" fill="#333">• tenant_id (users, projects,</text>
  <text x="80" y="715" font-size="10" fill="#333">  tasks, audit_logs)</text>
  <text x="80" y="730" font-size="10" fill="#333">• (tenant_id, project_id) on tasks</text>
  
  <text x="65" y="750" font-size="11" fill="#333">✓ Super Admin:</text>
  <text x="80" y="765" font-size="10" fill="#333">tenant_id = NULL (no tenant)</text>
  
  <text x="65" y="785" font-size="11" fill="#333">✓ Cascading Deletes:</text>
  <text x="80" y="800" font-size="10" fill="#333">Remove tenant → remove all</text>
  <text x="80" y="815" font-size="10" fill="#333">users, projects, tasks, logs</text>
</svg>